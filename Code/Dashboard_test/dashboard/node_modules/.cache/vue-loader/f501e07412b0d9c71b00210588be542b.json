{"remainingRequest":"/home/philippine/Documents/TD/Code/Dashboard_test/dashboard/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/philippine/Documents/TD/Code/Dashboard_test/dashboard/src/components/Temperature_lht65.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/philippine/Documents/TD/Code/Dashboard_test/dashboard/src/components/Temperature_lht65.vue","mtime":1594989524997},{"path":"/home/philippine/Documents/TD/Code/Dashboard_test/dashboard/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/philippine/Documents/TD/Code/Dashboard_test/dashboard/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/philippine/Documents/TD/Code/Dashboard_test/dashboard/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/philippine/Documents/TD/Code/Dashboard_test/dashboard/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnOwppbXBvcnQgSW5mbHV4IGZyb20gImluZmx1eCI7CmltcG9ydCBUZW1wX2xpbmVfaGlnaGNoYXJ0cyBmcm9tICIuL1RlbXBfbGluZV9oaWdoY2hhcnRzIjsKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJUZW1wX2xodDY1IiwKICAgIGNvbXBvbmVudHM6IHsKICAgICAgICBUZW1wX2xpbmVfaGlnaGNoYXJ0cwogICAgfSwKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgY2xpZW50OiBuZXcgSW5mbHV4LkluZmx1eERCKHsKICAgICAgICAgICAgICAgIGhvc3Q6ICcxOTIuMTY4LjEuNzAnLAogICAgICAgICAgICAgICAgZGF0YWJhc2U6ICdsb3dpbXBhY3RfZm9vZCcsCiAgICAgICAgICAgICAgICBwb3J0OjgwODYKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIHRlbXBfc2VyaWVzOiBbXSwKICAgICAgICB9CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGxvYWREYXRhQ2hhcnQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgbGV0IHRlbXBlcmF0dXJlX1NlcmllMTsKICAgICAgICAgICAgbGV0IHRlbXBlcmF0dXJlX1NlcmllMjsKICAgICAgICAgICAgbGV0IHF1ZXJ5X3RlbXBTZXJpZTEgPSAnU0VMRUNUIFRlbXBDX1NIVCBGUk9NIHR0bl9saHQ2NSBXSEVSRSB0aW1lID4gbm93KCkgLSA3ZCc7CiAgICAgICAgICAgIGxldCBxdWVyeV90ZW1wU2VyaWUyID0gJ1NFTEVDVCBUZW1wQ19EUyBGUk9NIHR0bl9saHQ2NSBXSEVSRSB0aW1lID4gbm93KCkgLSA3ZCc7CiAgICAgICAgICAgIC8vY29uc29sZS5sb2coIlF1ZXJ5OiIgKyBxdWVyeV90ZW1wU2VyaWUxKQogICAgICAgICAgICBQcm9taXNlLmFsbChbCiAgICAgICAgICAgICAgICB0aGlzLmNsaWVudC5xdWVyeShxdWVyeV90ZW1wU2VyaWUxKSwKICAgICAgICAgICAgXSkudGhlbihyZXN1bHRzID0+IHsKICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coIlJlc3VsdCIpCiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHJlc3VsdHMpCiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHJlc3VsdHNbMF0ubGVuZ3RoKQogICAgICAgICAgICAgICAgdGVtcGVyYXR1cmVfU2VyaWUxID0gcmVzdWx0c1swXS5tYXAoYSA9PiB7CiAgICAgICAgICAgICAgICAgICAgLy92YXIgZGF0ZSA9IG5ldyBEYXRlKChtb21lbnQoYS50aW1lKS51bml4KCkpICogMTAwMCkKICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGEudGltZSkKICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICB4OiBhLnRpbWUsLy8obW9tZW50KGEudGltZSkudW5peCgpKSoxMDAwLAogICAgICAgICAgICAgICAgICAgICAgICB5OiBwYXJzZUZsb2F0KGEuVGVtcENfU0hUKQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIFByb21pc2UuYWxsKFsKICAgICAgICAgICAgICAgICAgICB0aGlzLmNsaWVudC5xdWVyeShxdWVyeV90ZW1wU2VyaWUyKSwKICAgICAgICAgICAgICAgIF0pLnRoZW4ocmVzdWx0cyA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGVtcGVyYXR1cmVfU2VyaWUyID0gcmVzdWx0c1swXS5tYXAoYSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZhciBkYXRlID0gbmV3IERhdGUoKG1vbWVudChhLnRpbWUpLnVuaXgoKSkgKiAxMDAwKQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgeDphLnRpbWUsLy8obW9tZW50KGEudGltZSkudW5peCgpKSoxMDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogcGFyc2VGbG9hdChhLlRlbXBDX0RTKQogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCJUZW1wZXJhdHVyZSBzZXJpZSAxIikKICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHRlbXBlcmF0dXJlX1NlcmllMSkKICAgICAgICAgICAgICAgICAgICBsZXQgZmluYWxlX3NlcmllcyA9IFt7CiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdUZW1ww6lyYXR1cmUgZHUgYm/DrnRpZXInLAogICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB0ZW1wZXJhdHVyZV9TZXJpZTEsCiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dOYXZpZ2F0b3I6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnVGVtcMOpcmF0dXJlIGRlIGxhIHNvbmRlJywKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogdGVtcGVyYXR1cmVfU2VyaWUyLAogICAgICAgICAgICAgICAgICAgICAgICBzaG93TmF2aWdhdG9yOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIH1dCiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygiU2VyaWUgZmluYWxlIikKICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGZpbmFsZV9zZXJpZXMpCiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wX3NlcmllcyA9IGZpbmFsZV9zZXJpZXMKICAgICAgICAgICAgICAgIH0pLmNhdGNoKGVycm9yID0+IGNvbnNvbGUubG9nKGVycm9yKSkKICAgICAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5sb2coZXJyb3IpKQogICAgICAgIH0KICAgIH0sCiAgICBjcmVhdGVkKCkgewogICAgICAgIHRoaXMubG9hZERhdGFDaGFydCgpCiAgICB9LAogICAgbW91bnRlZCgpIHsKICAgICAgICBzZXRJbnRlcnZhbChmdW5jdGlvbigpewogICAgICAgICAgICB0aGlzLmxvYWREYXRhQ2hhcnQoKQogICAgICAgIH0uYmluZCh0aGlzKSwgMzAwMDAwKSAvL3JlZnJlc2ggcXVlcnkgdG91dGVzIGxlcyA1bWluCiAgICB9Cn0K"},{"version":3,"sources":["Temperature_lht65.vue"],"names":[],"mappings":";;;;;;;;;AASA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Temperature_lht65.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div class=\"mt-3\">\n        <b-card border-variant=\"light\" header=\"Température de la chambre\" class=\"text-center\">\n            <Temp_line_highcharts :temperature-series=\"temp_series\"/>\n        </b-card>\n    </div>\n</template>\n\n<script>\n    //import moment from 'moment';\n    import Influx from \"influx\";\n    import Temp_line_highcharts from \"./Temp_line_highcharts\";\n\n    export default {\n        name: \"Temp_lht65\",\n        components: {\n            Temp_line_highcharts\n        },\n        data() {\n            return {\n                client: new Influx.InfluxDB({\n                    host: '192.168.1.70',\n                    database: 'lowimpact_food',\n                    port:8086\n                }),\n                temp_series: [],\n            }\n        },\n        methods: {\n            loadDataChart: function () {\n                let temperature_Serie1;\n                let temperature_Serie2;\n                let query_tempSerie1 = 'SELECT TempC_SHT FROM ttn_lht65 WHERE time > now() - 7d';\n                let query_tempSerie2 = 'SELECT TempC_DS FROM ttn_lht65 WHERE time > now() - 7d';\n                //console.log(\"Query:\" + query_tempSerie1)\n                Promise.all([\n                    this.client.query(query_tempSerie1),\n                ]).then(results => {\n                    //console.log(\"Result\")\n                    //console.log(results)\n                    //console.log(results[0].length)\n                    temperature_Serie1 = results[0].map(a => {\n                        //var date = new Date((moment(a.time).unix()) * 1000)\n                        //console.log(a.time)\n                        return {\n                            x: a.time,//(moment(a.time).unix())*1000,\n                            y: parseFloat(a.TempC_SHT)\n                        };\n                    });\n                    Promise.all([\n                        this.client.query(query_tempSerie2),\n                    ]).then(results => {\n                        temperature_Serie2 = results[0].map(a => {\n                            // var date = new Date((moment(a.time).unix()) * 1000)\n                            return {\n                                x:a.time,//(moment(a.time).unix())*1000,\n                                y: parseFloat(a.TempC_DS)\n                            };\n                        });\n\n                        //console.log(\"Temperature serie 1\")\n                        //console.log(temperature_Serie1)\n                        let finale_series = [{\n                            name: 'Température du boîtier',\n                            data: temperature_Serie1,\n                            showNavigator: true,\n                        }, {\n                            name: 'Température de la sonde',\n                            data: temperature_Serie2,\n                            showNavigator: true,\n                        }]\n                        //console.log(\"Serie finale\")\n                        //console.log(finale_series)\n                        this.temp_series = finale_series\n                    }).catch(error => console.log(error))\n                }).catch(error => console.log(error))\n            }\n        },\n        created() {\n            this.loadDataChart()\n        },\n        mounted() {\n            setInterval(function(){\n                this.loadDataChart()\n            }.bind(this), 300000) //refresh query toutes les 5min\n        }\n    }\n</script>\n\n<style scoped>\n    .card-header{\n        background-color: lightcoral;\n        text-align: left;\n    }\n\n</style>"]}]}